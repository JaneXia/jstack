# Mantra模块

Mantra遵循模块化架构，除了应用程序上下文，Mantra所有的组件都应该在某个模块里.

您可以在程序里创建很多模块，并通过import来进行集成。

## 应用程序上下文和模块

应用程序上下文是应用程序的核心，它的定义应该不依赖任何模块。所有模块可以通过依赖来访问应用程序上下文，但是模块不应该去更新应用程序上下文。

## 模块定义

Mantra的模块需要一个定义文件'index.js'，用来暴露action和路由并可以接受应用程序上下文。

一个简单的模块定义如下图所示：

```js
export default {
  // 可选
  load(context, actions) {
    // 模块初始化
  },
  // 可选
  actions: {
    myNamespace: {
      doSomething: (context, arg1) => {}
    }
  },
  // 可选
  routes(injectDeps) {
    const InjectedComp = injectDeps(MyComp);
    // load routes and put `InjectedComp` to the screen.
  }
};
```

## 隐性模块

隐性模块(Implicit Modules)不需要定义文件，它没有action或者路由，也不需要做任何初始化操作，它可以包含下面这些内容：

* UI组件
* 容器
* 库

## 模块容器和UI组件

模块容器和UI组件可以通过ES2015模块的方式导入。

## 模块Actions

一个模块可以通过命名空间暴露action。这些命名空间对于应用程序而言是全局的，模块需要确保命名空间的唯一性。不过一个模块也可以暴露多个命名空间。

最后，每个模块的所有命名空间都会被合并，并可以在action和容器里面访问。

## 路由

在Mantra里，您可以使用任何路由库，如果需要的话，可以在多个模块里面定义路由。

## 核心模块

Mantra是百分之百模块化的，每个应用程序里至少有一个核心模块(core module)。
它仅是一个简单的模块，您需要在加载其它任何模块之前加载这个模块。核心模块是应用程序相关内容的最佳实现位置，包括：

* 核心路由
* 应用程序配置
* 公共库
* 公共action

根据程序的不同，有很多种组织模块的方法，具体方法可以参考附录C。

## 避免子模块

在一个模块内**不可以**有子模块。这个决定是为了不必要的复杂性，因为多层嵌套的模块结构是非常难以维护的。
